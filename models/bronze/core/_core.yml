# First, define the group and owner

# Then, add 'group' + 'access' modifier to specific models
models:
  # This is a public model -- it's a stable & mature interface for other teams/projects
  - name: dim_customers
    description: This model consolidates customer information with their order history, providing insights into customer behavior and value. It includes details such as the customer's first and last name, the date of their first and most recent orders, the total number of orders, and a calculated lifetime value. This model is useful for analyzing customer engagement and lifetime value.
    columns:
      - name: customer_id
        description: Primary Key for dim_customers
        tests:
          - unique
          - not_null
      - name: first_name
        tags: [key]
        description: The first name of the customer.
      - name: last_name
        description: The last name of the customer.
      - name: customer name
        description: The full name of the customer, combining first and last names.
      - name: first_order_date
        description: The date when the customer placed their first order.
      - name: most_recent_order_date
        description: The date when the customer placed their most recent order.
      - name: number_of_orders
        description: The total number of orders placed by the customer.
      - name: lifetime_value
        description: A calculated value representing the total worth of the customer based on their order history.
  # This is a private model -- it's an intermediate transformation intended for use in this context *only*
  - name: fct_orders
    columns:
      - name: order_id
        description: Primary Key for fct_orders
        tests:
          - unique
          - not_null
      - name: amount
        description: Amount
      - name: order_date
        # tests:
        #   - dbt_utils.expression_is_true:
        #       arguments:
        #         expression: " order_date >= '2018-01-01' and order_date <= '2018-04-09'"
  - name: int_orders__pivoted
    columns:
      - name: order_id
        description: Primary Key for int_orders__pivoted
        tests:
          - unique
          - not_null

  - name: customer_order_unique
    columns:
      - name: unique_id
        description: Primary Key for customer_order_unique
        tests:
          - unique
          - not_null